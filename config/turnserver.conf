# SyncWatch TURN Server Configuration
# For coturn (https://github.com/coturn/coturn)

# STUN/TURN listener port (UDP/TCP)
listening-port=3478

# TLS listener port (TURNS)
tls-listening-port=5349

# Relay ports range
min-port=49152
max-port=49200

# Realm (should match your domain in production)
realm=syncwatch.local

# Server name
server-name=syncwatch-turn

# Use fingerprint in TURN messages
fingerprint

# Long-term credential mechanism
lt-cred-mech

# Use REST API for credentials (recommended for production)
# This allows time-limited credentials generated by the backend
use-auth-secret

# Static auth secret (CHANGE IN PRODUCTION!)
# Generate with: openssl rand -hex 32
static-auth-secret=syncwatch_turn_secret_change_in_production

# Total quota of allocations (per user)
user-quota=12

# Max allocations per user
total-quota=1200

# Logging (reduce in production)
verbose
log-file=/var/log/turnserver/turnserver.log

# Don't let users use the loopback address
no-loopback-peers

# Don't allow peers on the same machine (security)
no-multicast-peers

# Mobility (handle address changes during session)
mobility

# STUN-only mode (disable TURN relay) - uncomment for testing
# stun-only

# CLI (useful for monitoring)
cli-ip=127.0.0.1
cli-port=5766

# Prometheus metrics (optional, for observability)
# prometheus

# Certificate paths for TURNS (TLS)
# In production, use real certificates from Let's Encrypt or similar
# cert=/etc/coturn/certs/turn_server_cert.pem
# pkey=/etc/coturn/certs/turn_server_pkey.pem

# Allowed peer IPs (add your server IPs here in production)
# allowed-peer-ip=10.0.0.0-10.255.255.255
# allowed-peer-ip=172.16.0.0-172.31.255.255
# allowed-peer-ip=192.168.0.0-192.168.255.255

# Denied peer IPs (block private ranges if running public server)
# denied-peer-ip=0.0.0.0-0.255.255.255
# denied-peer-ip=127.0.0.0-127.255.255.255

# External IP (set this in production to your public IP)
# external-ip=203.0.113.1

# Listening IPs (uncomment and set in production)
# listening-ip=0.0.0.0
# relay-ip=0.0.0.0
